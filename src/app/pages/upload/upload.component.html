<div class="col-md-12 mt-5 mb-5 justify-content-center align-items-center">
</div>
<div class="col-md-12 mt-5 mb-5 justify-content-center align-items-center">
    <p *ngIf="error_msg" class="alert alert-danger">{{ error_msg }}</p>
    <p *ngIf="success_msg" class="alert alert-success">{{ success_msg }}</p>
    <input type="file" style="display: inline-block;" (change)="incomingfile($event)" placeholder="Upload file" accept=".csv">
    <button type="button" class="btn btn-info" (click)="Upload()" >Upload</button>
</div>
<mat-progress-bar *ngIf="upload_pending" mode="indeterminate"></mat-progress-bar>
<div class="col-md-12 mt-5 mb-5 justify-content-center align-items-center">
<div class=" asu-card card-footer" *ngIf="show_table">
    <ul>
      <li>
        <div class="text-muted">Total data </div>
        <strong>{{ total_upload}}</strong>
        <div class="progress progress-xs mt-2">
          <div class="progress-bar bg-primary" role="progressbar" style="width: 100%" aria-valuenow="100" aria-valuemin="0" aria-valuemax="100"></div>
        </div>
      </li>
      <li class="d-none d-md-table-cell">
        <div class="text-muted">Successful Uploads</div>
        <strong>{{number_of_successful_uploads}} ({{ percentageCalculator(number_of_successful_uploads, total_upload) }}%)</strong>
        <div class="progress progress-xs mt-2">
          <div class="progress-bar bg-success" role="progressbar" style="width: 80%" aria-valuenow="20" aria-valuemin="0" aria-valuemax="100"></div>
        </div>
      </li>
      <li>
        <div class="text-muted">Failed Uploads </div>
        <strong>{{ number_of_failed_uploads}} ({{ percentageCalculator(number_of_failed_uploads, total_upload) }}%)</strong>
        <div class="progress progress-xs mt-2">
          <div class="progress-bar bg-danger" role="progressbar" style="width: 50%" aria-valuenow="60" aria-valuemin="0" aria-valuemax="100"></div>
        </div>
      </li>
    </ul>
  </div>
  </div>
  <br>
  <div class="row h-100 justify-content-center align-items-center">
      <mat-spinner *ngIf="upload_loader"></mat-spinner>
      <br>
      <p *ngIf="upload_loader" class="alert alert-danger">please stay on this page until upload is completed</p>
  </div>

<div *ngIf="show_table">
  <table id="members_table" class="table table-hover table-outline mb-0 datatable">
    <thead class="thead-light">
      <tr>
        <th>S/N</th>
        <th>Name</th>
        <th>Error</th>
        <th>Reason</th>
        <th>status</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let item of excel_data; let i=index">
        <td> {{ i + 1 }}</td>
        <td>
          <div>{{item?.user}}</div>
        </td>
        <td>{{item?.message}}</td>
        <td>
          {{item?.details}}
        </td>
        <td>
          <div class="badge badge-danger">
            failed
          </div>
        </td>
      </tr>
    </tbody>
  </table>
</div>
